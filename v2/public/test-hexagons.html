<!DOCTYPE html>
<html style="width:100%">
	<head>
		<title>Hex</title>
		<!-- Core CSS file -->
		<link rel="stylesheet" href="js/libraries/photoswipe/photoswipe.css">
		<!-- Skin CSS file (styling of UI - buttons, caption, etc.)
		In the folder of skin CSS file there are also:
		- .png and .svg icons sprite,
		- preloader.gif (for browsers that do not support CSS animations) -->
		<link rel="stylesheet" href="js/libraries/photoswipe/default-skin/default-skin.css">
	</head>
	<body style="width:100%">
		<script src="js/libraries/hexagon.js"></script>
		<script src="js/libraries/photoswipe/photoswipe.min.js"></script>
		<script src="js/libraries/photoswipe/photoswipe-ui-default.min.js"></script>
		<canvas id="HexCanvas" width="1200" height="300"></canvas>
		

		<!-- Root element of PhotoSwipe. Must have class pswp. -->
		<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
			<!-- Background of PhotoSwipe.
			It's a separate element as animating opacity is faster than rgba(). -->
			<div class="pswp__bg"></div>
			<!-- Slides wrapper with overflow:hidden. -->
			<div class="pswp__scroll-wrap">
				<!-- Container that holds slides.
				PhotoSwipe keeps only 3 of them in the DOM to save memory.
				Don't modify these 3 pswp__item elements, data is added later on. -->
				<div class="pswp__container">
					<div class="pswp__item"></div>
					<div class="pswp__item"></div>
					<div class="pswp__item"></div>
				</div>
				<!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
				<div class="pswp__ui pswp__ui--hidden">
					<div class="pswp__top-bar">
						<!--  Controls are self-explanatory. Order can be changed. -->
						<div class="pswp__counter"></div>
						<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
						<button class="pswp__button pswp__button--share" title="Share"></button>
						<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
						<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
						<!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
						<!-- element will get class pswp__preloader--active when preloader is running -->
						<div class="pswp__preloader">
							<div class="pswp__preloader__icn">
								<div class="pswp__preloader__cut">
									<div class="pswp__preloader__donut"></div>
								</div>
							</div>
						</div>
					</div>
					<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
						<div class="pswp__share-tooltip"></div>
					</div>
					<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
					</button>
					<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
					</button>
					<div class="pswp__caption">
						<div class="pswp__caption__center"></div>
					</div>
				</div>
			</div>
		</div>
		<script>

		var items = [{
			src: 'images/img1.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}, {
			src: 'images/img2.png',
			w: 500,
			h: 700
		}];

		for (var i = 0; i < items.length; i++) {
			var img = new Image();
			img.src = items[i].src;
			img.index = i;
			items[i].myImg = img;
		}

		// var hexagonGrid = new HexagonGrid("HexCanvas", 40);
		// hexagonGrid.drawHexGrid(10, 20, -50, -50, false);
		var sin60 = Math.sqrt(3) / 2;
		function getHexSettings(width, height, radius) {
			var cX = width / 2,
				cY = height / 2;
			var avgRadius = radius * 1.5;
			var halfNumCols = Math.ceil(cX / avgRadius);
			if (halfNumCols % 2 !== 0) {
				halfNumCols++;
			}
			var numColumns = halfNumCols * 2 + 1;
			var totalWidth = (halfNumCols * avgRadius + radius) * 2;
			var vertRadius = sin60 * radius;
			var halfYRadii = cY / vertRadius - 1;
			var halfRows = Math.ceil(halfYRadii / 2);
			var numRows = halfRows * 2 + 1;
			return {
				columns: numColumns,
				rows: numRows,
				topLeft: {
					x: cX - totalWidth / 2,
					y: cY - numRows * vertRadius
				}
			};
		}
		var r = 7;
		var hexagonGrid = new HexagonGrid("HexCanvas", r);
		var canvas = document.getElementById("HexCanvas");
		var ctx = canvas.getContext("2d");
		var hexInt = setInterval(function() {
			var hexSettings = getHexSettings(canvas.width, canvas.height, r);
			if (r < 80) {
				// console.log(canvas.width, canvas.height);
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				hexagonGrid.setRadius(r);
				hexagonGrid.drawHexGrid(hexSettings.rows, hexSettings.columns, hexSettings.topLeft.x, hexSettings.topLeft.y);
				// hexagonGrid.drawHexGrid(hexSettings.rows, 50, 0, hexSettings.topLeft.y, true);
				r *= 1.015;
			} else {
				clearInterval(hexInt);
				var middleRow = Math.floor(hexSettings.rows/2);

				for (var i = 0; i < hexSettings.columns; i += 2) {
					hexagonGrid.drawHexAtColRow(i, middleRow, null, items[(i)/2].myImg);

				}
			}
		}, 17);



		function openPhotoSwipe(col, row) {
			var hexSettings = getHexSettings(canvas.width, canvas.height, r);

			var middleRow = Math.floor(hexSettings.rows/2);

			if (row !== middleRow || col % 2 !== 0) {
				return;
			}

			var pswpElement = document.querySelectorAll('.pswp')[0];
			// build items array
			
			// define options (if needed)
			var options = {
				// history & focus options are disabled on CodePen
				history: false,
				focus: false,
				showAnimationDuration: 0,
				hideAnimationDuration: 0
			};
			var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
			gallery.init();
			gallery.goTo(col/2);


		}
		// openPhotoSwipe();
		// document.getElementById('btn').onclick = openPhotoSwipe;
		</script>
	</body>
</html>