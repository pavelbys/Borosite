<div>
    <div class="branch" dragover="dragOver()" dragleave="dragLeave()"
         drop="drop()"
         ng-class="{dragOver: draggingOver, isTrue: node.value.isTrue}"
         draggable="{{!node.isRoot()}}" dragstart="dragStart(node)"
         ng-mouseenter="showButtons = true" ng-mouseleave="showButtons = false"
         ng-init="showButtons = false">
        <input ng-hide="node.collapsed" ng-click="toggleCollapse()" type="button" value="-"/>
        <input ng-hide="!node.collapsed" ng-click="toggleCollapse()" type="button" value="+"/>
        <span ng-show="node.isRoot()" class="bold">If</span>
        <select ng-options="headerOption for headerOption in headerOptions" ng-model="node.value.data" ng-change="headerChanged()"></select>
        <span ng-show="node.isRoot() && headerInfo[node.value.data].plural" class="bold">of the following are true</span>
        <span ng-show="node.isRoot() && !headerInfo[node.value.data].plural" class="bold">of the following is true</span>
        <span ng-hide="node.isRoot()">of the following...</span>

        <div class="inlineBlock" ng-class="{hiddenButtons: !showButtons}">
            <input type="button" value="add condition" ng-click="addCondition()">
            <input type="button" value="add branch" ng-click="addBranch()">
            <input type="button" value="delete" ng-click="deleteSelf()">
            <input type="button" value="merge with parent" ng-show="isMergeable()" ng-click="mergeWithParent()">

        </div>
    </div>
    <ul ng-hide="node.collapsed">
        <li ng-repeat="cNode in node.childNodes.filter(isCondition)">
            <condition node="cNode" draggable="false" dragstart="dragStart(cNode)"></condition>
        </li>
        <li ng-repeat="bNode in node.childNodes.filter(isBranch)">
        <branch node="bNode"></branch>
        </li>
    </ul>


    <pop-up ng-show="newConditionVisible">
        <div>
            <select ng-options="object.name for object in conditionObjectList track by object.name"
                    ng-model="newCondition.object"></select>

            <select ng-options="attribute.name for attribute in newCondition.object.attributes track by attribute.name"
                    ng-model="newCondition.attribute"></select>

            <select ng-options="conditional for conditional in newCondition.attribute.conditionals"
                    ng-model="newCondition.conditional" ng-click="conditionDropdownsSelected = false"></select>

            <input type="number" ng-model="newCondition.value"/>
            <input type="button" value="done" ng-disabled="conditionDropdownsSelected" ng-click="newConditionComplete()">
            <input type="button" value="cancel" ng-click="newConditionCancel()">
        </div>
    </pop-up>
</div>